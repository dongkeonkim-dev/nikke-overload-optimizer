# NIKKE 오버로드 시스템 규칙

## 1. 게임 상태 (State)

### 1.1 리소스 상태
1. 커스텀 모듈
   - 리롤 혹은 영구 잠금 시 소비
   - 초기값 범위: 50~500개
   - 소비 조건:
     - 리롤: 1개 + (잠금 줄) * 1개
     - 영구 잠금: 2개 + (잠금 줄) * 1개
     - 영구 잠금 해제: 2개
   - 소비량 계산:
     - 부위별로 독립적으로 계산
     - 최대 1회 리롤당 3개 소비 가능 (2줄 모두 영구 잠금 시)

2. 커스텀 락 키
   - 일회성 잠금 시 소비
   - 초기값 범위: 200~2000개
   - 소비 조건:
     - 일회성 잠금: 20개 + (잠금 줄) * 10개
   - 소비량 계산:
     - 부위별로 독립적으로 계산

### 1.2 장비 상태
1. 부위 구분
   - 머리
   - 몸통
   - 팔
   - 다리

2. 각 부위별 옵션 구조
   - 첫째 줄 (상단)
   - 둘째 줄 (중단)
   - 셋째 줄 (하단)

3. 각 줄의 상태 정보
   - 옵션 존재 여부
   - 옵션 종류 (존재하는 경우)
   - 옵션 단계 (1~15)
   - 잠금 상태:
     - 미잠금
     - 영구 잠금
     - 일회성 잠금 (다음 리롤 시 자동 해제)

### 1.3 옵션 시스템
1. 옵션 출현 확률
   - 첫째 줄: 100% (항상 출현)
   - 둘째 줄: 50%
   - 셋째 줄: 30%

2. 옵션 종류 및 출현 확률
   - 10% 확률 옵션군:
     - 우월코드 데미지 증가
     - 공격력 증가
     - 크리티컬 확률 증가
     - 방어력 증가
   - 12% 확률 옵션군:
     - 명중률 증가
     - 최대 장탄 수 증가
     - 차지 데미지 증가
     - 차지 속도 증가
     - 크리티컬 피해량 증가

3. 옵션 단계 출현 확률
   - 1~5단계: 각 12% (총 60%)
   - 6~10단계: 각 7% (총 35%)
   - 11~15단계: 각 1% (총 5%)

4. 옵션별 단계당 수치표

| 레벨 | 우월코드 데미지 | 공격력 | 크리티컬 확률 | 방어력 | 명중률 | 최대 장탄 수 | 차지 데미지 | 차지 속도 | 크리티컬 피해량 |
|------|----------------|---------|--------------|---------|---------|--------------|-------------|-----------|----------------|
| 1    | 9.54          | 4.77    | 27.84        | 4.77    | 4.77    | 1.98         | 6.84        | 2.64      | 4.77           |
| 2    | 10.94         | 5.47    | 31.95        | 5.47    | 5.47    | 2.28         | 7.62        | 2.94      | 5.47           |
| 3    | 12.34         | 6.18    | 36.06        | 6.18    | 6.18    | 2.57         | 8.60        | 2.98      | 6.18           |
| 4    | 13.75         | 6.88    | 40.17        | 6.88    | 6.88    | 2.86         | 9.58        | 3.32      | 6.88           |
| 5    | 15.15         | 7.59    | 44.28        | 7.59    | 7.59    | 3.16         | 10.56       | 3.66      | 7.59           |
| 6    | 16.55         | 8.29    | 48.39        | 8.29    | 8.29    | 3.45         | 11.54       | 4.00      | 8.29           |
| 7    | 17.95         | 9.00    | 52.50        | 9.00    | 9.00    | 3.75         | 12.52       | 4.35      | 9.00           |
| 8    | 19.35         | 9.70    | 56.60        | 9.70    | 9.70    | 4.04         | 13.50       | 4.69      | 9.70           |
| 9    | 20.75         | 10.40   | 60.71        | 10.40   | 10.40   | 4.33         | 14.48       | 5.03      | 10.40          |
| 10   | 22.15         | 11.11   | 64.82        | 11.11   | 11.11   | 4.63         | 15.46       | 5.37      | 11.11          |
| 11   | 23.56         | 11.81   | 68.93        | 11.81   | 11.81   | 4.92         | 16.44       | 5.70      | 11.81          |
| 12   | 24.96         | 12.52   | 73.04        | 12.52   | 12.52   | 5.21         | 17.42       | 6.05      | 12.52          |
| 13   | 26.36         | 13.22   | 77.15        | 13.22   | 13.22   | 5.51         | 18.40       | 6.39      | 13.22          |
| 14   | 27.76         | 13.93   | 81.26        | 13.93   | 13.93   | 5.80         | 19.38       | 6.73      | 13.93          |
| 15   | 29.16         | 14.63   | 85.37        | 14.63   | 14.63   | 6.09         | 20.36       | 7.07      | 14.63          |

## 2. 행동 (Action)

### 2.1 리롤 행동
1. 턴 시작 시 선택
- 부위 선택 (필수)
  - 머리, 몸통, 팔, 다리 중 하나 선택

2. 잠금 선택 (선택)
- 잠금 가능 상태:
  - 미잠금 상태의 줄만 잠금 가능
  - 일회성 잠금은 다음 리롤 시 자동 해제
  - 영구 잠금은 해제 시까지 유지
- 잠금 종류:
  - 영구 잠금: 커스텀 모듈 소비
  - 일회성 잠금: 커스텀 락 키 소비
  - 잠금 없음: 비용 없음
- 잠금 해제:
  - 영구 잠금만 해제 가능
  - 커스텀 모듈 2개 소비

3. 리롤 실행
- 미잠금 상태인 모든 줄 동시에 리롤
- 일회성 잠금된 줄은 잠금 해제
- 영구 잠금된 줄은 유지

### 2.2 비용 계산
1. 리롤 비용
- 기본 비용: 커스텀 모듈 1개
- 잠금된 줄당: 커스텀 모듈 1개 추가
- 총 커스텀 모듈 비용 = 1 + (영구 잠금 + 일회성 잠금 줄 수)

2. 잠금 비용
- 영구 잠금: 2 + (기존 영구 잠금 줄 수)
- 일회성 잠금: 20 + (기존 일회성 잠금 줄 수 * 10)

3. 잠금 해제 비용
- 영구 잠금 해제: 커스텀 모듈 2개

4. 비용 계산 예시
- 잠금 없을 시, 리롤: 
  * 커스텀 모듈: 1개
- 잠금 없을 시, 1줄 영구 잠금 후 리롤: 
  * 커스텀 모듈: 4개 (잠금 2 + 리롤 2)
- 잠금 없을 시, 2줄 영구 잠금 후 리롤: 
  * 커스텀 모듈: 8개 (잠금 2 + 잠금 3 + 리롤 3)
- 잠금 없을 시, 1줄 일회성 잠금 후 리롤:
  * 커스텀 모듈: 2개 (리롤 2)
  * 커스텀 락 키: 20개
- 잠금 없을 시, 2줄 일회성 잠금 후 리롤:
  * 커스텀 모듈: 3개 (리롤 3)
  * 커스텀 락 키: 50개 (일회성 잠금 20 + 일회성 잠금 30)
- 잠금 없을 시, 1줄 영구 잠금 및 1줄 일회성 잠금 후 리롤:
  * 커스텀 모듈: 6개 (잠금 2 + 리롤 4)
  * 커스텀 락 키: 30개

- 1줄 영구잠금 상태시 리롤:
  * 커스텀 모듈: 2개
- 1줄 영구잠금 상태시, 1줄 추가 영구 잠금 후 리롤: 
  * 커스텀 모듈: 6개 (잠금 3 + 리롤 3)
- 1줄 영구잠금 상태시, 1줄 일회성 잠금 후 리롤 :
  * 커스텀 모듈: 3개 (리롤 3)
  * 커스텀 락 키: 30개

- 2줄 영구잠금 상태시 리롤:
  * 커스텀 모듈: 4개

## 3. 목표 (Goal)

### 3.1 목표 조건
1. 목표 수치 설정
   - 각 옵션별로 합산 목표 수치 설정 가능
   - 초과 달성 허용

2. 달성 판정
   - 전체 합산 목표: 각 옵션별로 모든 줄 합산이 목표 이상

### 3.2 출력 정보
매 턴마다:
1. 최적의 행동 추천
   - 선택할 부위
   - 잠금할 줄과 잠금 방식
   - 예상되는 결과와 확률
2. 목표 달성 확률
   - 개별 옵션별 달성 확률
   - 전체 목표 달성 확률
   - 현재 상태 기준 남은 수치
3. 예상 소요 자원
   - 커스텀 모듈 수
   - 커스텀 락 키 수
   - 최소/평균/최대 예상치
   - 95% 신뢰구간

## 4. 옵션별 수치표

| 레벨 | 우월코드 | 공격력 | 크리확률 | 방어력 | 명중률 | 장탄수 | 차지뎀지 | 차지속도 | 크리뎀지 |
|------|----------|---------|-----------|---------|---------|---------|-----------|-----------|-----------|
| 1    | 9.54     | 4.77    | 27.84     | 4.77    | 4.77    | 1.98    | 6.84      | 2.64      | 4.77      |
| 2    | 10.94    | 5.47    | 31.95     | 5.47    | 5.47    | 2.28    | 7.62      | 2.94      | 5.47      |
| 3    | 12.34    | 6.18    | 36.06     | 6.18    | 6.18    | 2.57    | 8.60      | 2.98      | 6.18      |
| 4    | 13.75    | 6.88    | 40.17     | 6.88    | 6.88    | 2.86    | 9.58      | 3.32      | 6.88      |
| 5    | 15.15    | 7.59    | 44.28     | 7.59    | 7.59    | 3.16    | 10.56     | 3.66      | 7.59      |
| 6    | 16.55    | 8.29    | 48.39     | 8.29    | 8.29    | 3.45    | 11.54     | 4.00      | 8.29      |
| 7    | 17.95    | 9.00    | 52.50     | 9.00    | 9.00    | 3.75    | 12.52     | 4.35      | 9.00      |
| 8    | 19.35    | 9.70    | 56.60     | 9.70    | 9.70    | 4.04    | 13.50     | 4.69      | 9.70      |
| 9    | 20.75    | 10.40   | 60.71     | 10.40   | 10.40   | 4.33    | 14.48     | 5.03      | 10.40     |
| 10   | 22.15    | 11.11   | 64.82     | 11.11   | 11.11   | 4.63    | 15.46     | 5.37      | 11.11     |
| 11   | 23.56    | 11.81   | 68.93     | 11.81   | 11.81   | 4.92    | 16.44     | 5.70      | 11.81     |
| 12   | 24.96    | 12.52   | 73.04     | 12.52   | 12.52   | 5.21    | 17.42     | 6.05      | 12.52     |
| 13   | 26.36    | 13.22   | 77.15     | 13.22   | 13.22   | 5.51    | 18.40     | 6.39      | 13.22     |
| 14   | 27.76    | 13.93   | 81.26     | 13.93   | 13.93   | 5.80    | 19.38     | 6.73      | 13.93     |
| 15   | 29.16    | 14.63   | 85.37     | 14.63   | 14.63   | 6.09    | 20.36     | 7.07      | 14.63     |
